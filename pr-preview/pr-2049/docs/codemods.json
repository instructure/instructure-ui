{"description":"\n## Codemods\n\nCodemods are small scripts that can automate tedious code refactorings. It's like Search & replace, just on steroids, InstUI uses them so breaking changes during major version upgrades are easier for users. Common use cases are renaming imports or props of components.\n\nTo accomplish this our codemods use [jsCodeshift](https://github.com/facebook/jscodeshift). This tool parses source files to an Abstract Syntax Tree (AST) and gives us an API that can modify it.\n\n### Codemod development\n\nOur codemods live in the `ui-codemods` package. Each codemod is an ES module with a default export and is executed by jscodeshift. it should have the following code:\n\n```ts\n---\ntype: code\n---\nimport type { Transform } from 'jscodeshift'\n/**\n * @param file the file to transform\n * @param api jscodeshift instance\n * @param options\n * @param options.filename if `filename` is specified then emitted warnings are\n * written to this file.\n * @param options.usePrettier if `true` the transformed code will be run through\n * [Prettier](https://prettier.io/). You can customize this through a [Prettier\n * config file](https://prettier.io/docs/configuration.html)\n * @returns the modified file as `string` or `null`\n */\nconst myCodemod: Transform = (file, api,\n                              options?: { fileName?: string; usePrettier?: boolean }) => {\n    return instUICodemodExecutor([my, cool, scripts], file, api, options)\n}\nexport default myCodemod\n```\n\n> You can find lots of useful helper functions in `packages/ui-codemods/lib/utils/codemodhelpers.ts` and `packages/ui-codemods/lib/utils/codemodTypeCheckers.ts`\n\n#### Testing codemods\n\nYou should write unit tests for your codemods. They are tested via test fixtures (sample before transform, sample after transform). To create a unit test for say `sampleCodemod` the following steps are needed:\n\n1. create a new test in `packages/ui-codemods/lib/__node_tests__/codemod.tests.ts`:\n   ```ts\n   ---\n   type: code\n   ---\n   it('tests the cool sampleCodemod', () => {\n     runTest(sampleCodemod)\n   })\n   ```\n2. create a folder named `sampleCodemod` in `packages/ui-codemods/lib/__node_tests__/__testfixtures__`\n3. Here create sample input-output file pairs whose filename follows the following naming convention: `[fixtureName].input.[js/ts/tsx]`, `[fixtureName].output.[js/ts/tsx]`. These should be your test cases that ensure that the codemod does the transformation correctly.\n\nDone! Run `npm run test:vitest ui-codemods` to run your test.\n\nFinally, you should try to run your codemod as users will do:\n\n```sh\n---\ntype: code\n---\nnpx jscodeshift@17.3.0 -t /path/to/sampleCodemod.ts /path/to/code/to/rewrite --usePrettier=false\n```\n","title":"Writing codemods","category":"Contributor Guides","order":11,"relativePath":"docs/contributor-docs/codemods.md","extension":".md","srcPath":"docs/contributor-docs/codemods.md","srcUrl":"https://github.com/instructure/instructure-ui/tree/master/docs/contributor-docs/codemods.md","packageName":"@instructure/docs","requirePath":"@instructure/docs/contributor-docs/codemods","requireStr":"require('/home/runner/work/instructure-ui/instructure-ui/docs/contributor-docs/codemods.md').default","esPath":"@instructure/docs/contributor-docs/codemods","themePath":"docs/contributor-docs/codemods.md","themeUrl":"https://github.com/instructure/instructure-ui/tree/master/docs/contributor-docs/codemods.md","id":"codemods"}